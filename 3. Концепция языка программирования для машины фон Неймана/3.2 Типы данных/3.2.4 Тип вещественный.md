### 1. **Понятие вещественного числа**

- **Вещественные числа** — это расширение целых чисел, включающее рациональные и иррациональные значения.
- Проблемы с представлением в компьютере:
    - Невозможно представить иррациональные числа. (бесконечная длина)
    - Большинство рациональных чисел также исключаются из-за ограничений машинного слова.
- Представление в компьютере заменяет континуум вещественных чисел конечным множеством рациональных приближений

### 2. **Машинное представление вещественных чисел**

#Замечание При использовании одного и того же машинного слова для представления целых и вещественных чисел оказывается, что машинных вещественных чисел даже меньше, чем целых ввиду неоднозначности представления
#### **Экспоненциальная форма записи**
(c правильной мантиссой, так как экспоненциальная форма записи может быть разная )
![[Pasted image 20241127205544.png]] 

- Число представляется как произведение мантиссы (m) и основания в степени порядка (p):                                                                    $X=m×B^ p$  
  где m — нормализованная мантисса (старший разряд ненулевой), p — порядок.
  Такая запись (основанная на экспоненциальной форме с нормализованной мантиссой и скорректированным порядком называется **полулогарифмической** или с **плавающей точкой (запятой)**, хотя на самом деле плавает ПОРЯДОК!!!!!!!

#### **Нормализация**

- Обеспечивает уникальное представление числа:
    - Мантисса становится правильной дробью.
    - Порядок корректируется так, чтобы старший разряд мантиссы был ненулевым.
      
Представление с плавающей точкой 
![[Pasted image 20241127214210.png]]

#### **Особенности кодирования**

- **Плавающая точка**: Представление числа как пары (m, p).
- **Диапазон и точность**:
    - Пусть каждая ман тисса содержит I цифр, а порядок — q цифр; тогда I определяет точность представления числа, a q — диапазон представляемого числа
    - Например, стандарт IEEE 754:
        - Одинарная точность (32 бита): диапазон от $1.2×10^{−38}$   до $3.4×10^{38}$
        - Двойная точность (64 бита): диапазон от $2.2×10^{−308}$   до $1.8×10^{308}$

	На аппаратном уровне поддерживаются также плюс и минус бесконечности и неопределенность
	![[Pasted image 20241128231613.png]]
    


### 3. **Погрешности при работе с вещественными числами**

#### **Виды погрешностей**

- **Неустранимая погрешность**: связана с неточностью исходных данных.
- **Погрешность округления**:
    - Возникает из-за ограничения точности представления числа в памяти.
    - Например, число 2.7 в двоичной системе счисления представляется как бесконечная дробь 10.1011(0011). Без округления этой дроби ее помещение в машинное слово невозможно. Эти проблемы отсутствуют лишь в системах с кратными основаниями: 2  То есть привычная для человека десятичная система счисления вносит дополнительную неточность при переводе в неизбежную для ЭВМ двоичную систему счисления
      $\hat{X} = \hat{m} * b^{\hat{p} - \hat{l} + 1}$
      Дело в том, что ~X представляет собой внешнее значение представителя числа X. Имеется еще внутреннее значение $\hat{X}$. Различные машины одному и тому же ~X могут ставить в соответствие различные $\hat{X}$
      Это накладывает определенные ограничения на программирование: условия = и != могут не выполняться
      На практике сравнение вещественных чисел на равенство (неравенство) заменяют проверкой принадлежности ^-окрестности.
- Погрешность может суммироваться при последовательных операциях.

#### **Машинное эпсилон $ε$**
В связи с тем, что подавляющее количество значений типа REAL представляется приближенно, возникает вопрос о точности выполнения действий над такими числами (о точности плавающей арифметики). Эту точность можно характеризовать с помощью так называемого машинного эпсилон
- Машинное эпсилон - наименьшее число, которое при сложении с 1 дает значение больше 1.
- Пример вычисления: ε=1; while 1+ ε/2 > 1:  ε=ε/2
- Для 32-битной системы ε≈$2.22×10^{−16}$

### 4. **Основные операции с вещественными числами**

#### **Сложение и вычитание**
1. Выравнивание порядков: меньший порядок приводится к большему, мантисса сдвигается вправо.
2. перевод мантисс слагаемых в дополнительный модифицированный код
3. Операция над мантиссами (сложение или вычитание).
4. исправление нормализации вправо или влево
5. перевод мантиссы результата в прямой код
6. Округление результата.
   Округление результата может быть реализовано несколькими способами. Например, один из них заключается в том, что предварительный результат вычисляется с большим количеством разрядов, чем разрядная сетка чисел, над которыми производится операция. Даже если используется двоичный код, достаточно одного лишнего машинного (двоичного!) разряда. В этом случае округление заключается в прибавлении единицы к этому дополнительному младшему разряду предварительного результата. Если при выполнении действия в этом дополнительном разряде был получен нуль, то это не вызовет переноса единицы в основные разряды. Если же в дополнительном разряде при выполнении действия получена единица, то предварительный результат будет увеличен на единицу 173 основного младшего разряда, что обусловлено переносом единицы, полученной при увеличении дополнительного разряда. После выполнения этих действий дополнительный разряд отбрасывается..

#### **Умножение и деление**

- Умножение: порядки складываются, последовательным выполнением операций сдвига и арифметического сложения производится перемножение мантисс;.
- Деление: порядок делимого уменьшается на порядок делителя, мантиссы делятся.
- Знак результата определяется по правилу: s(X×Y)=s(X)+s(Y) mod  2
- результат округляется; 5) 
- если надо, полученный результат нормализуется.

#### **Особенности операций**

- Переполнение и потеря точности возможны при больших разницах порядков.
- Сдвиги используются для выравнивания разрядов.



### 5. **Практические проблемы и решения**

#### **Сравнение чисел**

- Проблемы:
    - Два числовых значения могут быть близки, но не равны из-за округления.
    - Пример: 0.1+0.2≠0.3 в машинной арифметике.
- Решение: проверка принадлежности ε-окрестности: if ∣x−y∣<ε, then x=y

#### **Оптимизация вычислений**

- Избегать операций, приводящих к значительным потерям точности, например, вычитания близких чисел.
- Выполнять сложение/вычитание в порядке возрастания по модулю.

#### **Организация операций**

- Формулы вроде a×(b−c)a  заменять на a×b−a×ca .
- Минимизировать число операций над вещественными числами.
  


### 6. **Рекомендации для программирования**

- При работе с вещественными числами:
    - Избегайте сравнения на точное равенство.
    - Используйте интервальные методы для оценки результата.
- Учитывайте специфику архитектуры и ограничения стандартов (например, IEEE 754).


### 7. **Применение вещественного типа**

- В инженерных расчетах, научных вычислениях, графике.
- Необходим для представления чисел с большой точностью и широким диапазоном значений.

